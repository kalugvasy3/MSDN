<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="https://assets.onestore.ms/cdnfiles/onestorerolling-1612-12000/shell/v3/scss/shellnoresponsive.min.css" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Header,0:sprite;/Areas/Epx/Themes/Windows/Content:0&amp;amp;v=5A8F2C7924508E93B220C779E83AA378" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Areas/Epx/Themes/Windows/Content/UhfHeader.css?v=636183226100754713" data-do-not-move="true" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:sprite,0:Footer,1:ImageSprite,2:SelectLocaleFromPopUp;/Areas/Epx/Themes/Windows/Content:0,/Areas/Epx/Themes/WindowsApps/Content:1,/Areas/Epx/Themes/Base/Content:2&amp;amp;v=BD7685882DB97CEEAF714E22F6547CFE" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Areas/Epx/Themes/Windows/Content/UhfFooter.css?v=636183226100754713" data-do-not-move="true" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>2D  FFT (Fast Fourier Transform )  WPF / High-dynamic range images - extend ....</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" /><link href="description/164f65a8-6347-4e81-a672-755b6c03615aBrand.css" type="text/css" rel="Stylesheet" />
        <link href="https://i1.code.msdn.s-msft.com/windowsapps/content/common/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="https://i1.code.msdn.s-msft.com/windowsapps/content/common/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>2D  FFT (Fast Fourier Transform )  WPF / High-dynamic range images - extend ....</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            WPF, Fast Fourier Transforms, FFT, Two Dimensional FFT, the high-dynamic range of the image
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            WPF, Two Dimensional FFT, the high-dynamic range of the image
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Desktop, Web, Cloud, Phone, Data, Windows RT
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">1/14/2017</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">MIT</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="https://code.msdn.microsoft.com/windowsapps/2-Two-Dimensional-FFT-WPF-b9cdad74">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<h1>Introduction</h1>
<p>&nbsp;</p>
<p><em>See http://paulbourke.net/miscellaneous/dft/ -&nbsp;</em><strong>2 Dimensional&nbsp;<strong>Fourier transform</strong></strong></p>
<pre>     Formula: forward
                  N-1
                  ---
              1   \          - j k 2 pi n / N
      X(n) = ---   &gt;   x(k) e                    = forward transform
              N   /                                n=0..N-1
                  ---
                  k=0

      Formula: reverse
                  N-1
                  ---
                  \          j k 2 pi n / N
      X(n) =       &gt;   x(k) e                    = forward transform
                  /                                n=0..N-1
                  ---
                  k=0</pre>
<p><em>In order to perform FFT (Fast Fourier Transform) instead of the much slower DFT (Discrete Fourier Transfer), the image must be transformed so that the width and height are an integer power of 2. This can be achieved in one of two ways, scale the image
 up to the nearest integer power of 2 or zero pad to the nearest integer power of 2. The second option was chosen here to facilitate comparisons with the original. The resulting image is 512 x 512 pixels.</em></p>
<p>&quot;Image on background&quot; to Gray - FFT2 (forward) - (shift/swap if needed) FFT2 (backward) - Gray Image</p>
<p>&nbsp;</p>
<p><img id="165860" src="https://code.msdn.microsoft.com/windowsapps/site/view/file/165860/1/fft2_1.PNG" alt="" width="400" height="400">&nbsp;</p>
<p>&nbsp;</p>
<p>To GrayImage</p>
<p><img id="165861" src="https://code.msdn.microsoft.com/windowsapps/site/view/file/165861/1/fft2_2.PNG" alt="" width="400" height="400"></p>
<p>&nbsp;</p>
<p>To Forward FFT2 - Log10 (1 &#43; Magnitude) - <strong>Classic &nbsp;</strong>Shifted image 1-4 &nbsp; 2-3 &nbsp;</p>
<p><img id="168036" src="https://i1.code.msdn.s-msft.com/windowsapps/2-two-dimensional-fft-wpf-b9cdad74/image/file/168036/1/classic.png" alt="" width="400" height="400"></p>
<p>Above approach log10(1&#43; x) does not bring the real picture (even we use log scale).</p>
<p><strong>How to extend the high-dynamic range of the image? </strong>Instead&nbsp;of using log10(1 &#43; x) use</p>
<p>log10(y&#43;x) where &quot;y&quot; you can change dynamically ]0..1] (for example by mouse wheel).</p>
<p>In that case extremely&nbsp;small value has a chance to appear&nbsp;on the image ... see screenshots below..</p>
<p>&nbsp;</p>
<p>After &quot;<strong>forward</strong>&quot;&nbsp;FFT, &nbsp;you can use<strong> &quot;wheel&quot; </strong>
&nbsp;for scaling Log10 (Magnitude) image.</p>
<p><img id="168037" src="https://i1.code.msdn.s-msft.com/windowsapps/2-two-dimensional-fft-wpf-b9cdad74/image/file/168037/1/scalewheel.png" alt="" width="400" height="400"></p>
<p>&nbsp;</p>
<p><img id="168038" src="https://i1.code.msdn.s-msft.com/windowsapps/2-two-dimensional-fft-wpf-b9cdad74/image/file/168038/1/scalewheel2.png" alt="" width="400" height="400"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><em>2 dimensional Fourier transforms simply involve a number of 1-dimensional Fourier transforms. More precisely, a 2-dimensional transform is achieved by first transforming each row, replacing each row with its transform and then transforming each column,
 replacing each column with its transform. Thus a 2D transform of a 1K by 1K image requires 2K 1D transforms. This follows directly from the definition of the Fourier transform of a continuous variable or the discrete Fourier transform of a discrete system.&nbsp;</em></p>
<p>&nbsp;</p>
<h1><span>Source Code Files</span></h1>
<ul>
<li><em>FFT2.fs - FFT and FFT2 functions</em> </li><li><em>images.fs - some additional functions for transwer image to Complex Array / Gray / Log10 image</em>
</li><li><em>MainWindoe - WPF&nbsp;</em> </li></ul>

</div>


    </div>
</body>
</html>
